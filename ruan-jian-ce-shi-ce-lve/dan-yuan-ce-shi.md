# 单元测试

## **单元测试**

### 概念

* **单元内涵**
  * 不同环境含义不同, `面向对象`:**函数, 过程**等,  `面向对象` : **类, 类中成员函数**等.
* **单元测试**
  * 针对软件设计的最小单位 **- 程序模块** , 进行正确性检验的测试工作.
* **测试方法**
  * 单元测试需要从程序的内部结构除法设计测试用例. 多个模块可以平行地独立进行单元测试.
* **主要依据**
  * 开发阶段中的 **详细设计**

### 单元测试的  进入和退出条件

* **进入单元测试的 条件** 
  * 所用测试用例执行通过.
  * 单元测试覆盖率达到预定要求.
  * 单元测试未被执行的代码进行正式审查.
* **退出单元测试的 条件**
  * 被测代码编译连接通过.
  * 被测代码静态检查工具 检查通过.
  * 已完成至少一轮代码检视或走读.
  * 单元测试用例的检视通过.
  * 单元测试代码写完并通过检测.

### 单元测试的 测试内容

* **单元测试主要内容**
  * **模块接口测试测试**,           \(就是与其他模块的交互\).
    * `数据流测试`
      * 调用本模块 的输入参数是否正确;
      * 本模块调用子模块时  输入给子模块的参数是否正确.
      * 全局量的定义在各模块中是否一致.
    * `内外存交互测试`
      * 文件属性是否正确;
      * OPEN 与 CLOSE语句是否正确.
      * 缓冲区容量与记录长度是否匹配.
      * 在进行读写操作之前  是否打开了文件;
      * 在结束文件处理时  是否关闭了文件;
      * 正文书写 / 输入错误;
      *  I/O 错误是否检查并做了处理.
  * **单元内局部数据结构测试**     \(就是模块内部的数据结构\)
    * 不正确或不一致的数据类型说明
    * 使用尚未赋值或尚未初始化的变量.
    * 错误的初始值或错误的缺省值.
    * 变量名拼写错 或书写错误.
    * 不一致的数据类型.
    * 全局数据对模块的影响.
  * **独立路径测试**
    * `重要路径`
      * 对模块中重要的执行路径进行测试.
    * `计算, 控制流`
      * 查找由于错误的计算, 不正确的比较 或 不正常的控制流而导致的错误.
    * `基本, 循环`
      * 对基本执行路径和循环进行测试, 可以发现大量的路径错误.
  * **边界条件测试.**
    * `流边界`
      * 注意数据流, 控制流中刚好**等于, 大于或小于** 确定的比较值时出错的可能性.  对这些地方要仔细的选择测试用例, 加以测试.
    * `关键路径`
      * 如果对模块运行时间有要求的话, 还要专门进行关键路径测试,  以确定最坏情况下和平均意义下影响模块运行时间的因素.
  * **错误处理测试.**
    * 出错的**描述**是否难以理解
    * 出错的**描述**是否能够对**错误定位.**
    * 显示的**错误**与**实际的错误是否相符**.
    * 对**错误条件的处理 正确与否**.
    * 在对**错误进行处理之前**, **错误条件是否已经引起系统的干预**等.

### **测试用例设计**

* **依据**
  * 详细设计说明书和源程序清单.
* **了解**
  * 该模块的 I/O 条件 和模块的逻辑结构.
* **手段**
  * 主: 白盒测试
  * 辅: 黑盒测试
* **结果**
  * 合理和不合理输入的鉴别和响应比较预计和实际结果.



### **测试环境搭建**

* **模块并非独立程序, 进行测试时, 要考虑它和外界的联系, 需用一些`辅助模块`去做响应模拟.**
  * `驱动模块` 
    * 用来模拟被测试模块的上以及模块, 相当于被测模块的主程序.
  * `桩模块`
    * 模拟被测试的模块所调用的模块, 而不是软件产品的组成的部分.

![&#x8F85;&#x52A9;&#x6A21;&#x5757; ,&#x6869;&#x6A21;&#x5757;,&#x9A71;&#x52A8;&#x6A21;&#x5757;&#x548C;&#x88AB;&#x6D4B;&#x6A21;&#x5757;](../.gitbook/assets/image%20%28199%29.png)



