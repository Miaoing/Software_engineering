# 程序设计风格

## 程序设计风格

1. **基本要求**
2. **可读性要求**
3. **正确型与容错性要求**
4. **可移植性要求**
5. **输入和输出要求**
6. **重用性要求**

\*\*\*\*

### 程序设计风格 -- 基本要求

* **程序结构清晰且简单易懂,  单个函数的行数一般不要超过100 行.**
* 算法设计应该简单, 代码要精简, 避免出现垃圾程序.
* **尽量使用标准库函数 \(类方法\)  和公共函数 \(类方法\).**
* 最好使用括号以避免二义性.

### 程序设计风格 -- 可读性要求

* **注释**
  * **`程序头,  函数头说明`**;  **`接口说明`** ;  **`子程序清单, 有关数据的说明`**;  **`模块位置`**;  **`开发历史`**等.
  * **主要变量** \(**`结构, 联合, 类 或对象`**\) :  **含义的注释**.
  * **应保持注释与代码完全一致.**
  * **`处理过程的每个阶段和典型算法前都有相关注释说明`, `但是不要对每条语句加注释.`**
* **程序格式**
  * **`程序格式清晰.`**
  * **`一行只写一条语句, 不要密密麻麻, 分不出层次.`**
  * **显示程序的逻辑结构, `利用空格, 空行 和 缩进` 进行,  缩进量一般为4个字节.**
* **程序本身**
  * **语句力求简单, 清晰, `不要 片面追求效率, 程序编写得过于紧凑, 使语句复杂化.`**
  * **简单变量的运行速度比下标\(数组\) 变量的`运算要快`**, _程序员可以把语句进行如下转换:_
    * `X = A[I] + 1/A[I];`
    * `写成`
    * `T = A[I]; X = T + 1/AI ;`
  * 编程时尽可能使用已有的库函数.
  * 尽量用**公共过程**或**子程序**代替具有`独立功能的重复代码段.`
  * 使用**括号清晰的表达** `算数表达式`和`逻辑表达式`的**运算顺序**.
  * 尽可能使用三种基本控制结构编写程序, 使用 `IF, THEN, ELSE`  结构实现分支 ; 使用 `DO UNTIL` 或 `DO WHILE`  来实现循环.
  * 避免**采用过于复杂的条件测试, 少用含有 "`否定运算符`"  的语句**
    * `if( (!(A<= 10 ))  || !((B >= 11)) ) ...`
    * `改成:`
    * `if(  (A>10) ||  (B<11) ) ...`
  * 避免使用空的  **`ELSE` 语句 和 `IF THEN IF` 语句**
  * 避免使用 **`ELSE GOTO` 和 `ELSE RETURN` 结构.**
  * 避免过多的**`循环嵌套` 和 `条件嵌套`.**
  * 数据结构要 **`有利于程序的简化`**
  * 模块功能尽可能**`单一化,` 模块间的`耦合`能够`清晰可见.`  利用`信息隐蔽`确保每一个`模块的独立性`.**
  * 对**`递归定义`的`数据结构` 尽量使用`递归过程`.**
  * 对太大的程序, **`要分块编写, 测试, 后在集成`**
  * 尽量不要**`修补结构差的程序,` 应该`重新设计和编码`.**
* **数据说明**
  * 数据说明的**先后次序规范化**
    * 简单变量类型说明,  数组说明,  公用数据块说明, 文件说明.
  * 每个类型说明中可按如下**顺序排列**
    * 整形量说明, 实型量说明, 字符量说明,  逻辑量说明.
  * 每一条说明语句中可按**字母顺序排列**
    * 例如  INTEGERcost, length, price, width   \(A ~ Z\) .

### 程序设计风格 -- 正确性与容错性要求

* 程序**`首先是正确`**, 其次是考虑**`优美 和 效率`**.
* 对所有的用户输入, 必须进行**`合法性和有效性`**检查.
* **不要单独进行浮点数的比较.**
* **所有变量在调用前必须被初始化.**
* 改一个错误时可能产生新的错误, **`因此修改前首先考虑其影响`**.
* 单元测试也是编程的一部分, 提交联调测试的**`程序必须通过单元测试.`**
* 单元测试时, **`必须针对类里的每一个 public 方法进行测试,`**  **测试其正确的输入, 是否得到正确的输出; 错误地输入是否有容错处理.**

### 程序设计风格 -- 可移植性要求

* 应当尽量使用语言的标准部分, 避免使用第三方提供的接口, 以确保程序不收具体的运行环境影响, 和平台无关.
* 对数据库的操作, 使用符合语言规范的标准接口类 \(例如JDBC\),  除非程序是运行在特定的环境下, 并且有很高的性能优化方面的要求.
* 程序中涉及到的数据库定义和操纵语句, 尽量使用标准 SQL 数据类型和SQL 语句.

### 程序设计风格 -- 输入和输出要求

* 任何程序都会有输入输出,  **输入输出的方式应当尽量方便用户的使用.**  在需求分析和设计阶段就应确定基本的**输入输出风格**, 要避免因设计不当带来操作和理解的麻烦.
* `对所有的输入数据进行检验, 从而识别错误的输入, 以保证每个数据的有效性.`
* 检查输入项各种重要组合的合理性, 必要时报告输入状态信息.
* 输入的步骤和操作尽可能简单, 并且保持**简单的输入格式.**
* **有些输入信息应提供缺省值.**
* 输入一批数据时, 最好使用输入结束标志, 而不要由用户指定输入数据数目.
* 在**`以交互方式进行输入`**时, 要显示提示信息, `选择项 和 取值范围, 便于操作`. 同时, 在输入数据的过程和输入数据结束时, 也要在屏幕上给出状态信息.
* 当程序设计语言对输入格式有严格要求时, 应保持输入格式与输出语句的要求一致.
* **给所有的输出加上注解信息.**
* **按照用户的要求设计输出报表格式.**

### 程序设计风格 -- 重用性要求

* **`可重复使用的, 功能相对独立的算法或接口, 应该考虑封装成公共的控件或类.`**
* `相对`**`固定和独立`**`的`**`程序实现方式和过程`**`, 应考虑做成`**`程序模板`**`, 增强对程序实现方式的复用.`



